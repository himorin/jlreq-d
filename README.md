# Requirements for Japanese Digital Text Layout

(tentative content taken from: jlreq/docs/JDLReq_overview/JDLReq_overview.md)

## モティベーションと前提
印刷とwebに代表されるデジタルテキストでは、馬車と自動車のように、目的は同じでも技術的な成り立ちが根底から異なる。つまりそこに異なる制約条件と可能性がある。このため、印刷のためではない、デジタルネイティブな組版の要件文書が必要だと考える。詳細は 2019/03/31 Keiko Univ. APL 報告の木田の文章参照（ここにチェックインしておく？）。

JLReq の先にあるものとしてそのような文章を開発すること、またそれを JLReq とは別個の、デジタルテキストにフォーカスしたドキュメントとすることの合意が JLReq TF で行われた（2021/10）。とりあえずの名前を JDLReq とする。Requirement という位置付けになるか、Recommendation という位置付けになるかは中身をもっと書いてゆくと自然に決まるだろう。

## トップレベルのゴール
- デジタルテキストのための組版要件を示す
- 国際化ソフトウェア環境との親和性を高める
- ユニバーサルデザインの視点を導入する

## 対象となるアプリケーション
#### 対象
- メールやメモなど日常のテキスト、特にプレーンテキスト
- Web ページ（スクロールするドキュメント）
- ワードプロセッサー文書（ページがある）
- 電子書籍（書籍としての構成、ページ、見開き）
- プレゼンテーション（特殊：タイトルの集合のようなドキュメント、大きなサイズの文字の組み方という一般の問題として）
#### 対象外
- 印刷のためのページレイアウトアプリケーション（JLReqが対応）
- グラフィックデザインや広告

## 書き方の方針
デジタル技術の進化は早く、その上に成り立つデジタルテキストも従来より早い速度で変化してゆくと考えられる。ゆえ、組版の一つの方法をはっきりと示しつつも権威的にならず、同時に他の方法、その機能を考える際に重要なこと、答えのない課題などを提示することによって、判断のベースにし、また将来の進化を促す inspiring な内容にする。

同じ理由で、現状に追い越されないよう、定期的にアップデートが必要になろう。若い人の参加がも少し欲しい？

## 組版要件を定義する際の方針
JLReq にある機能をベースとする。デジタルでは重要でないと思われる機能は削除せず、重要度をプライオリティで示す。実際のところ、従来の技術による制約が契機でできた機能であっても本質を捉えている場合があり、捨てる判断は容易ではない。批判のベースになるように、理由、考え方を説明する。代替えの手段を説明する。

新しい提案や将来の可能性の示唆などは、注意深く議論して重要な質を高く。

デジタルにおける新しい要素
  - リフローアーキテクチャ
  - ラグ組や空白行で区切られるパラグラフ
  - プロポーショナルな要素を多く含むテキスト、またプロポーショナルな和文書体の扱い
  - ベースラインなど欧文ベースのエンジン上での振る舞い
  - リンクなど、既にある程度確立されているデジタルテキストの機能
  - アクセシビリティ関連の要件
  - 注の機能

## 国際化ソフトウェア環境との親和性を高める方法
#### 多言語の中の日本語として記述
- 従来の JLReq は日本語に閉じた環境を扱っている。その意味で JLReq は JIS 文字規格に似ている。JDLReq は国際化ソフトウェア環境の中の一つの言語としての日本語を扱う。
- その前提で、外国語、数式など日本語組版の中で規定する必要のないものは対象外。界面の振る舞いだけを定義する
#### 技術の扱いの方針
- 現在進行形の技術の中での組版なので、技術の前提なしに議論することは不可能である。同時に、技術の詳細からは中立に記述することによって、寿命の長い記述方法になることを期待する。
- ドキュメントでどの技術を前提としているかを明確化する。確立され、今後も使われると思われる基礎的な技術：Unicode、ウェブ技術、高機能フォント。
- それら技術に不足があれば、その不足を洗い出して指摘する。例えば約物の問題、リーダ、ダーシ類、それらのつながったもの
- 禁則など組版指定がなくても自動的に動くべき機能、言い換えるとプレーンテキストでも動くべき機能と、ルビのようにマークアップなどでの指定が必要な機能が見分けられるように書く
- 複数の方法がある場合、それが実装者の選択であるべきか、エンドユーザーの選択であるべきかを見分ける。従来はどれも組版を行うものが決めていた
#### 実装支援
- シンプル化、プライオリティ付け、デフォルトの方法の提案などにより規格化コスト・実装コストを下げ、それにより、より早期に、より多くの、またよりベンダ間で統一の取れた実装が得られることを期待する
- 規格化や実装が前に進んでいない機能を分析する。それらが前に進むことを支援できるように整理を行う
- 日本語や日本語組版の概念を知らない技術者の理解のため、基本を書く

## ユニバーサルデザインの視点を導入する方法
- 各項目にユニバーサルデザイン、健常者、障害者双方にとってのアクセスしやすさの視点を加える
- ここ、もう少し具体化（村田さん）

## トップレベルの章立て案
### 案1
- 日本語の基礎
  - 非日本語話者のために基本から説明
  - 日本語の文字、書体の基礎
  - 外国語の文字との違い（漢字は中国語と、約物は英語、中国語と）
  - 欧文との整合、ベースライン、欧文書体との組み合わせ方
  - 読みやすさアクセシビリティの観点の説明
- 本文の組版
  - プレーンテキスト
  - スタイルテキスト
- 見出し、タイトルの組版
- 注 = 本文と並列な構造
  - ここは結構日本語独特のものがある
  - かつ、デジタルで一番可能性の変わる部分
- ページの構成
  - 図版、動画、表など、テキスト以外のオブジェクトのページへの割り付け
  - ユーザーの画面サイズに合わせたレイアウトもここか？
- 書籍の構成
  - デジタルでの冊子の意味、問題意識を提示
  - 参照の問題、唯一性の問題
### 案2
もっと論理的に。基礎はそれぞれのセクションの初めでカバー
- 文字
- 行の組版
- 本文の組版（行が折り返す、複数の行が集まる）
- 見出し（大きなサイズの文字への考慮もここ）
- 縦書きを別にまとめる
- 注 = 本文と並列な構造
- ページの構成
- 書籍の構成


## 章立て案の詳細

### 2. 日本語組版の基本
日本語を知らないエンジニアに伝わるように基礎から。俯瞰を示し機能へのガイドにもなる。ここにある方が良いか、次の章にあれば良いか、の移動がありそう。特に、字送り方向の組版の基本は重なる。

- 日本語で使う文字の基本
  - 漢字（用途による文字数）、仮名
  - 英数字も
  - 約物
  - 縦書き横書きの文字の向き
  - 全角半角互換文字
- 日本語書体の基本
  - メトリック
  - 英文書体との合わせ方（書体、相対サイズ、相対位置）
- 字送り方向の組版の基本
  - 行頭行末揃え、ラグ組
  - 段落最初の行頭の字下げ vs 欧文風パラグラフ
  - ベースラインシステムとの整合
  - 縦書き横書き
  - 縦書きの苦手なディスレクシアに対する言及
    - 横書き縦書き変換のできるテキストを作るための考慮
  - （詳細は後の行組版のセクション）
- 行送り方向の組版の基本
- ベースラインシステム、欧文との合わせ方を一箇所にまとめる？
- 外国語の文字との違い（漢字は中国語と、約物は英語、中国語と）
- 読みやすさ、アクセシビリティ
- 機能的観点での日本語組版機能の整理
  - 一覧で俯瞰（インデックス的にもなる）
  - 例えば：注のための機能は、単純な括弧、割注、脚注後注の類、行間注、など
  - ルビは注に似るが、もっと粒度が細かく単語に内在する並列構造を示す。日本語の表記と音との並列構造がその必要性のもとであることを触れる

### 3. 本文の組み方
以下、テキストの論理的な構造とプライオリティ両方を章立ての構造で示そうとしたが、必ずしもそうなっていない。プレーンテキスト部分にプライオリティの低いものもあれば、スタイルテキスト部分にルビなどプライオリティの高いものもある。もっと良いアイディアがあれば歓迎。行内の組み立ては第2章に持ってゆく、もしくは独立させて、このセクションは行送りから入る方法も。

- 基本の横書き（プレーンテキスト）
  - 簡便な行組版ルール案を反映。混植は特別なことではなく、当たり前の前提として扱う
  - 行内の組み立て
    - 約物
  - 行送り方向
    - 行長と行間、読みやすさの話題はここ？
  - 段落の組み立て
    - 禁則（禁則のための文字クラスを作らなくては）
    - 両端揃えの行の調整とラグ組（デフォルトの字間および行の調整のための文字クラスの導入）
    - （上二つは行内の問題？）
    - 段落整形，そろえ及び段落末尾処理とラグ組
  - タブ処理、必要？
- 基本の縦書き（プレーンテキスト）
  - 横書きで書いたことの応用編
  - 縦中横
  - 縦と横で注意の必要な文字
- 組版指示の必要な機能（スタイルテキスト）
  - 異なるサイズやフォントの混合の話題は何か言うことあるか？
  - 基本的なルビはここ（木田案）
  - 強調処理
    - 圏点（具体的な文字コードとサイズ）など伝統的なもの
    - 欧文組版にあるもの、文字やバックグラウンドの色など新しいもの
- 場所未定のその他の話題はどこ？
  - 印刷雑誌に連載の問題点など反映
  - 欧文括弧など欧文用約物を使う場合への言及

### 4. 見出し、大きなサイズの文字
  - サイズを大きくした場合の空間の感じ方
  - つめ組など
  - 行の最初の揃え方（サイズが大きい場合、そのままだと開始位置がバラバラに見える）

### 5. 注
  - ここは結構日本語独特のものがある。割注など。ページ前提の注は分ける
  - かつ、デジタルで一番可能性の変わる部分
  - 両側ルビや、注としてのルビはここ（木田案）

### 6. ページの構成
ここにページを前提とする機能を入れる
- Web やワードプロセッサのように「仕上りサイズと四方のマージンを設定する」方法での考え方
- リフローアーキテクチャでの考え方
- 外部オブジェクト（図版、動画、表など）の配置
- ページ前提の注

### 7. 書籍の設計
ここに両開き含め書籍向けの内容を入れる
  - デジタルでの冊子の意味、問題意識を提示
  - 参照の問題、唯一性の問題
