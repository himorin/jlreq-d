# 日本語デジタルテキスト組版の要件<br/>Requirements for Japanese Digital Text Layout

これは「生きている文書」であり、内容がプロジェクトの進行につれて変化する可能性があります。

This is a working document and can change with the progress of the project. The English version of this document is coming soon (how soon?).

## モティベーション
印刷と、Webに代表されるデジタルテキストでは、馬車と自動車のように、目的は同じでも技術的な成り立ちが根底から異なる。最も根本的な違いは、誰が組版を決定するかにある。印刷においては送り手が組版を決定し単一のコピーが受け手に配布される。デジタルテキストにおいて受け手の元で無数の異なる組版が生成される。このような違いが印刷と異なる制約条件と可能性を生み出す[^note]。このため、印刷のためではない、デジタルネイティブな組版の要件文書が必要だと考える。JLReq の先にあるものとしてそのような文章を開発すること、またそれを JLReq とは別個の、デジタルテキストにフォーカスしたドキュメントとすることの合意が JLReq TF で行われた（2021/10）。とりあえずの略称を JLreq-d とする。

[^note]: 詳細は 2019/03/31 Keiko Univ. APL 報告の木田の文章参照（ここにチェックインしておく？）。

デジタルデバイス上の組版は進化しつつある技術なので、印刷と異なり、ある権威を以て定義するというような内容にはならないだろう。それでも、現在までの経験や考察によりわかっていること、また明らかになった課題などを、一旦ここでまとめておくことに意味があると考える。また、現状に追い越されないように、一旦の完成後も将来のチームによって継続的なアップデートが必要になろう。

このドキュメントは、テキストレイアウトや電子書籍がデジタルネイティブな環境でどのようにあるかを示した、少なくともW3Cの中では、最初のものになると思われる。先例があれば教えてほしい。ゆえ、結果的に、言語共通の考察も多く含まれることとなろう。


新しいドキュメントを作るもう一つのモティベーションは、開発支援である。JLreq を読み下してソフトウェアに落とし込もうとすると、いくつかの障害に突き当たる。
- 多くの部分が技術独立に書かれており、ソフトウェアとの距離がある
- 国内市場で培われてきた技術の記述であり、国際化システムとの距離がある
- ある程度の日本語や日本語組版技術への知識を前提とした記述となっている
- 機能のプライオリティが示されていない

これらのため、ソフトウェアを開発しようとすると、独自の解釈による翻訳、そしてマーケットの知識なしには難しい判断が必要となる。シンプル化、プライオリティ付け、デフォルトの方法の提案などにより規格化コスト・実装コストを下げ、それにより、より早期に、より多くの、またよりベンダ間で統一の取れた実装が得られることを期待する。


デジタルテキストによって可能になることの一つは、より優れたアクセシビリティである。柔軟な表示が可能であることにより、より多くの人に対応することができる。テキストをよりアクセシブルにするために考慮すべき点などを示すことで、より多くの人にとって使いやすい環境が達成されることを期待する。従来の印刷では特殊事例と言えるアクセシビリティを一般的なこととして扱う、これがこの文書の三つ目の柱である。


## 対象読者
- ソフトウェア開発者
- コンテンツ制作者

## 対象とするアプリケーション
- メールやメモなど組版指定のない日常のテキスト
- Web ページ（リフローしスクロールするドキュメント）
- ワードプロセッサー文書（ページがある）
- 電子書籍（書籍としての構成を持つ）
- アクセシビリティの重要なWebページや教科書

#### これらは対象外とする
- 印刷のためのページレイアウトアプリケーション（JLReqが対応）
- グラフィックデザインや広告

## アプローチ
### 書き方の方針
- 考え方を示す：デジタル技術の進化は早く、その上に成り立つデジタルテキストも従来より早い速度で変化してゆくと考えられる。ゆえ、組版の一つの方法をはっきりと示しつつも権威的にならず、同時に他の方法、その機能を考える際に重要なこと、答えのない課題などを提示することによって、判断のベースにし、また将来の進化を促す inspiring な内容にする。
- 基本的機能からより高度な機能へ内容を配列する：入口を低くする

### デジタルにおける新しい要素
- リフローアーキテクチャ。無数の組版が読み手の手元で生成されるアーキテクチャ
- 冊子形態が持つ意味の喪失
- 検索可能性
- ラグ組や空白行で区切られる欧文スタイルのパラグラフ
- ベースラインなど欧文ベースのエンジン上での振る舞い
- プロポーショナルな要素を多く含むテキスト、またプロポーショナルな和文書体の扱い
- リンクによるナビゲーションや注の機能など、デジタルテキストならではの優れた機能の利用
- より良いアクセシビリティの可能性
- 多様なサイズの画面。モバイルデバイスに代表される小さな画面

### 国際化ソフトウェア環境との親和性を高める方法
#### 多言語の中の日本語として記述
- 従来の JLReq は日本語に閉じた環境を扱っている。その意味で JLReq は JIS 文字規格に似ている。JLreq-d では Unicode のように国際化ソフトウェア環境の中の一つの言語としての日本語を扱う。
- その前提で、外国語、数式など日本語組版の中で規定する必要のないものは対象外。界面の振る舞いだけを定義する
#### 技術の扱いの方針
- 現在進行形の技術の中での組版なので、技術の前提なしに議論することは不可能である。同時に、技術の詳細からは中立に記述することによって、寿命の長い記述方法になることを期待する。
- ドキュメントでどの技術を前提としているかを明確化する。確立され、今後も使われると思われる基礎的な技術：Unicode、ウェブ技術、高機能フォント。
- 必要な組版機能に対して規格に不足があれば、その不足を洗い出して指摘する。規格化や実装が前に進んでいない機能を分析する。それらが前に進むことを支援できるように整理を行う。

#### 実装支援
- シンプル化、プライオリティ付け、デフォルトの方法の提案などにより規格化コスト・実装コストを下げる
- 日本語や日本語組版の概念を知らない技術者の理解のため、基本を書く
- 組版指定がなくても自動的に動くべき機能、言い換えるとプレーンテキストでも動くべき機能と、ルビのようにマークアップなどでの指定が必要な機能が見分けられるように書く
- 複数の方法がある場合、それが実装者の選択であるべきか、エンドユーザーの選択であるべきかを見分ける。印刷ではそれらを組版を行うものが決めていた

## 目次案
このレポジトリのGitHub wiki内の[目次案](https://github.com/w3c/jlreq-d/wiki/jlreq-d-ToC-draft)を参照ください。

See [draft Table of Content](https://github.com/w3c/jlreq-d/wiki/jlreq-d-ToC-draft) at GitHub wiki of this repository.
