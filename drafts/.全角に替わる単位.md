このファイルには、3.2章 全幅の定義、および、別の章におくべきその背景を収めてある。内容に対してチームの承認があれば、その際にそれぞれ適切な場所に移動する。
議論は https://github.com/w3c/jlreq-d/discussions/59 で行う。

---

## 3.2　全幅の定義
Jlreq-dでは文字を並べる方向（字詰め方向）の長さを表す単位として、従来から使われてきた「全角」に替えて、これをより一般化した単位「全幅」を次のように定義して使用する。

**「全幅とは、その場所に使用されているフォントに含まれる和字間隔（U+3000）文字のそのフォントサイズにおける字詰め方向の幅」**

従来の組版規則は、フォント中の和字が全角、すなわち文字サイズに等しい大きさの正方形のボディを持っていることに依存して記述されてきた。大多数の日本語フォントはこの前提に当てはまるが、従来から長体や扁平体などこの前提から外れるフォントが存在しており、さらにデジタル化の進展により多様性が増している。これらの多様なフォントに対して組版規則を記述できる用語体系が必要である。「全幅」は各々のフォントに含まれる和字間隔（U+3000）の字詰め方向の幅を基準として定義されるので、どのような日本語フォントに対しても定義することができる。先に述べたように大多数の日本語フォントは正方形のボディを持っており、これらに対しては全幅と全角の長さは一致する。

この文書で全幅は次の幅の指定に使われる：
- 段落先頭行の字下げの幅
- 両端揃えを行う際の行長
- その他、和欧間や分かち書きなどのアキを規定するときの基準

Unicode / CSSなどではfullwidthという用語が等幅CJK文字の字詰め方向の幅として使用されており、全幅の定義とほぼ同じである。よって全幅の英訳として、文章中で正確な定義を与えてfullwidthを使用する。

----

## 「全幅」の背景と議論
「全幅」は従来の組版規則で使われてきた「全角」という単位を、ボディーが正方形でないフォントに対しても適用できるよう、意味を字詰め方向の幅に限定し一般化したものである。

#### 目的
JLReqやJIS X 4051など、従来の組版規則は、フォント中の和字が全角、すなわち文字サイズに等しい大きさの正方形のボディを持っていることに依存して記述されている。大多数の日本語フォントはこの前提に当てはまるが、従来から長体や扁平体など、この前提から外れるフォントも存在していた。さらにデジタル化の進展により、漢字と仮名の幅が異なる長体フォントや、仮名がプロポーショナルであるフォントなど、多様性が増している。これらの多様なフォントに対しても可能な範囲で統一的な組版規則を記述できる用語体系が必要である。

#### 定義
JLReqにおいて全角という単位は次の場合に使われている：
> 他にも見つかれば追加する
1. 段落先頭行の全角下がり
2. 分かち書きなどのアキが全角（しかし全角は広すぎるように感じる）
3. 和欧間のアキが全角の整数分の一（1/4-1/8）
4. 括弧や句読点の字幅が全角。アキの大きさが全角の半分
5. 行長が全角の整数倍
6. 行間の基準が全角の½

1から3では全角という用語が空白の字詰め方向の幅の基準として使われている。1, 2には和字間隔U+3000そのものが使われる。よってフォントの和字が統一的な幅をもっていない場合でも、そのフォントに含まれる和字間隔文字の字詰め方向の幅はこれらの目的に適切と考えることは合理的であろう。3はその整数分の一である。

約物の字幅やそこに含まれる空白の幅はタイプフェースデザイナーの範囲なのか、組版規則の範囲なのか判然としない。しかし、自由度を最大にとってタイプフェースデザイナーの裁量であるとした場合でも、組版規則の範囲だとした場合でも、4はそれぞれ個別の約物の字幅、およびその中に含まれる空白として考えることができる。

5は全ての和字が同じ幅の時にのみ意味があり、その場合には特定の和字の幅で代用できる。

6は行送り方向の幅であり、幅とは別個の定義が必要だが、この単位が必要な箇所が少ないことから、用語を作る必要性は高くないと考えられる。

新たな単位の定義の方法の一つは、フォント中の和字が全て同じ幅の時に、その幅とすることである。しかし、OpenTypeなどのフォント規格には、和字が全て同じ幅であるかどうかを示す情報は存在しない。そのためCSSでは、等幅であるかどうかを判定するために数種の漢字の幅を比較するという手間がかかりかつ不確実な方法で代用している。

もう一つの方法は、特定の文字の幅をもって全幅の定義とする方法である。上の分析によると1, 2, 3 は和字間隔の字詰め方向の幅を基準とするのが合理的であり、この幅は5にも使うことができる。4は全体的な基準によらず、個別の約物の幅でよかろう。よって、幅の基準として全角空白を使用するのが合理的であろうと思われる。1, 2の場合には和字間隔文字が直接使われてきた。よってフォントがプロポーショナルな場合であっても、そのフォントの和字間隔文字の字詰め方向の幅、すなわち全幅が、タイプフェースデザイナーが意図した1, 2の場合の適切な幅である、と見なすことは合理的であろう。

文字詰め方向と直角方向の長さについては、あまり使う場所が多くないので、その都度言葉で説明する。例えば「行間の最低限の基準は、和字間隔の文字詰め方向と直角方向の幅の半分」など。

#### 名前
この単位の名前として以下の意見があった
- 全角という言葉を再定義する
- 別の言葉で定義する
- 定義せず、その度に説明する

全角という概念には歴史があり、またフォントサイズとも結びついているため、この言葉を定義し直すと混乱が大きいと考えられた。また、この単位は全角を置き換える役目を持ち、ある程度頻繁に使われるので、用語を決めずに都度説明するよりも、用語を定義することは合理的であろうと考えられる。いくつかの案の中から「全幅」と仮に決めた。

#### 英語
|日本語|英語|メモ|
|---|---|---|
|全幅|fullwidth|
|全角|em / em square / em quad|単位としては用いない方針であるがもし必要であれば|
|全角文字|fullwidth characters|文字名としての全角xxはfullwidth|
