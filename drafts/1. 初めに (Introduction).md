# 第一章 初めに
> この章は、この文書の位置付け、それが必要な理由、なぜあなたが読む必要があるかを書く。

> 冒頭に、非常に簡潔にこの文書は何であるかを書く。
 
この文書は、デジタルデバイス上 のWebやメールなどに見られるような、表示環境に合わせた柔軟な表示が可能なテキストシステムにフォーカスし、その要件を扱う。印刷を目的とする組版については「[日本語組版処理の要件](https://www.w3.org/TR/jlreq/)」を参照のこと。

この文書では、デジタルデバイス上で環境に合わせた柔軟な表示が可能なテキストシステムを、そのデータのあり方、表示、その動的な振る舞い含め、デジタルテキストと呼ぶ。

## 1. この文書の目的
> なぜこの文書が必要なのか。簡潔にしかし説得力のある文で。

日本語の組版規則は、金属活字の技術を用いて読みやすく美しい印刷物を経済効率よく製造するための規則として成立した。よって組版規則は金属活字技術の性質を色濃く反映している。組版規則はまた、紙という媒体を用いる印刷の仕組みの性質を反映している。

> 現在の組版規則が、活版印刷や写真植字の技術制約のもとで作り上げられたことを端的に示す例はあるか？

デジタルテキストの組版は印刷の組版とは根本的に異なる技術的基盤を持っている。最も重要な違いは、個々のデジタルデバイスが自動組版装置でありかつ媒体であることだ。最終的な組版の決定は作り手によってではなく、受け手によって行われる。デジタルテキストは生きたデータであり、組版結果は表示環境に応じて、または編集中に多様に変化する。よって例えばあらかじめ行の折り返し位置を予測することができない。

印刷とデジタルテキストの違いのため、JLReq の組版規則をデジタルデバイスに適用しようとすると、実装の難しい点が出て来る。また、印刷にはないデジタルテキスト独自の機能のための工夫が必要になる。（より高度な、美しく読みやすい組版のために使われるべきエンジニアの時間が、そこに至る前に消費されてしまう）
> ルビ付きテキストのコピー＆ペーストなど

本文書では、これらの課題に答えるため、従来の規則に必要な更新を行い、また動的な側面などデジタルテキスト独自の機能のための拡張を加えている。（組版は目的ではなく、それぞれのテキストの持つ目的を達成するための手段だ。デジタル技術の持つ大きな可能性を利用するために発展すべきものである。）

本文書はまた、デジタルにおいて組版と密接な繋がりのある二つの話題、組版の観点からのテキストの作り方、およびフォントに必要な機能についてをカバーしている。

> 本文書ではJLReq が取り扱っていない範囲の話題を扱っている。一つはテキストの作り方である。印刷においては、書き手の作成したテキストは、編集・組版のプロセスの中で人の手で誤りが正されて、最終の組版ができあがる。デジタルにおいては、書き手はテキストのみならず、フォントやサイズ、パラグラフのスタイルなどの広範な組版指示を含めたスタイル付きテキストを作成し、それがそのまま組版される。つまり、デジタルにおいては書き手は組版の重要な一部を担うことになる。よって、この文書では組版の観点からのテキストの作成を取り扱った。

書くにあたっては、理由や背景を極力説明し、より良い解決方法を考える一助となるように執筆した。それによって、デジタルデバイス上でより高度な日本語組版の実装を助け、また日本語テキストの組版を将来に繋げてゆく一助となることを期待する。

既刊の「[日本語組版処理の要件](https://www.w3.org/TR/jlreq/)」が印刷における組版という既に確立された規則を記述しているのに対し、この文書は日々進化しつつあるデジタル環境における組版について論じている。よって、デジタルデバイスの進化、特に世界のデジタルテキストの進化に従って、この文書もまたそれを取り込んでゆくことが必要となろう。

## 2. デジタルテキストは印刷とどのように異なるか
デジタルテキスト組版が、印刷とどのように異なるかをまとめておく。

#### 組版を誰がどこで決定するか
従来の組版規則は人間が組版を実行するための原則として生また。時代を経て一部自動化され緻密化したが、人によるケースバイケースの処理を期待するという性質を受け継いでいる。

対して、デジタルテキストの組版はソフトウェアにより完全に自動的に実行され、人の目によるチェックと訂正が介在する余地がない。よって例外的な入力に対してでも破綻せず合理的な組版を決定できる必要がある。（長いルビの例。他に良い例はあるか？）

#### 組版のコスト
印刷における日本語組版規則は、明治当時の最新技術であった金属活字の技術のもとで、組版作業者が美しく読みやすい組版を効率よく作成できるような指針として生まれた。例えば全角の分割を基準とした長さの単位は組版の効率にとって重要であり、また行の調整には手間がかかるのでできるだけ避けたいものである（本当？）。しかし浮動小数点計算を基準とするデジタルデバイスにおいては全角の分割を基準とした長さの利点はなく、行の調整の計算も効率よく行うことができる。

組版の実行速度をコストとして捉えると、デジタルテキストは印刷とは異なるコスト圧力を受ける。例えば、デジタルデバイスは大量のデジタルテキストの組版を一瞬で完了させる必要がある。特に、ウィンドウのサイズを変える、文字の大きさを変えるなど動的な挙動を操作に追従して滑らかな動きとして見せるためには、アニメーションにおいて動きをスムースに見せるために必要な速度と同じ、毎秒数十コマの速度で組版を完了して画面を更新する必要がある。ゆえに組版の規則は高速な実行を可能にするものである必要がある。

#### 媒体のコスト
歴史的に書写や印刷において、紙自身とその在庫のコストが大きく、それが組版に大きな影響を与えてきた。例えば英語などに見えるパラグラフの示し方の変遷や、辞書での省略形の利用はその影響の一例である。デジタルテキストにはこの紙のコストが存在しない。


#### リフローを起こす
デジタルテキストにおいては送り手が組版結果を厳密に指定することができない。送り手はCSSやリッチテキストなどを用いて組版の大枠を指定するが、最終的な結果はそれぞれの受け手の環境に従う。特に行長はデバイスの画面サイズやウィンドウのサイズに従って決定されるため、あらかじめ予見することができない。その結果、どこで行が折り返されるのか、長いグループルビが行の途中に来るのか折り返しにぶつかってしまうのか、事前に知ることはできない。

#### 冊子形態が利点を失う
内容が固定の大きさのページに分かれた本、冊子本の発明は歴史的に見て印刷の発明に勝るとも劣らない大きなインパクトがあったと言われている\*¹。それは冊子本の形がそれ以前から存在した巻物に対して大きな優位性を持っていたからだ。冊子本は四角く、背表紙があるため収納・管理が容易である。ページ番号によりランダムアクセスが可能で、ページ番号による安定的な参照が可能である。しかしデジタルテキストによる冊子本はこれらの優位点を失う。収納・管理の容易性、ランダムアクセス性はデジタルデバイスの性質として冊子本の形式に頼らずに達成されている。またリフローによりどこでページが区切れるのか、そもそも全体が何ページなのかが不定であり、安定した参照の方法としてページ番号を使うことができない

このような技術環境のもと、Webで巻物、スクロールという古い形式が復活し、また目的に沿った新しい画面構成がさまざまに試されている。

\*¹ アンドルー・ペティグリー『印刷という革命:ルネサンスの本と日常生活』桑木野幸司訳、白水社、2015年、 p18-21 (Andrew Pettegree、 The Book in Renaissance、 NewHaven、 Yale University Press、 2010)

デジタルデバイスにおいてはその代わりに画面の大きさからの制約を受ける。

#### ページの存在に依存した組版要素が使えない
例えば脚注や段組。これは前項の一部で良いかね。

#### 検索、選択、コピー＆ペースト、異なったスタイルの適用、リユース
（デジタルデバイスならではの動的な要素。ましなタイトルが必要）

#### インタラクティブな表示の活用
ユーザーの操作に応じたインタラクティブな動作が可能であるので、例えば注釈をオーバーレイとして表示させるなど、新たな組版の可能性を考えることができる。

#### 世界の中の日本語組版
デジタルデバイスにおける組版は、国際化ソフトウェアのアーキテクチャ、例えば Unicode 環境や国際化された基本APIの上で実装されるので、その環境で実装のしやすいものである必要がある。また、国際化されたソフトウェアは複数の言語を同時に扱うことを想定しており、例えば他の言語の中に日本語が埋め込まれる場合やその反対の場合を想定する必要がある。そのため、基本的な文字や行の配置方法に整合性が取れている必要がある。別の言語、特に英語で採用されている組版方法が日本語にも流れ込んでくる。例えばイタリックはその例である。さらに、目的の同じ組版が言語ごとに異なる場合、既に実装されている組版方法を採用する方向に圧力が働く。例えば注の組版方法として脚注が既に実装されている場合、割注の優先順位は下がる。

国際化されたソフトウェアの中で、日本語は多数の言語の中の一つであり、関与する専門家は必ずしも日本語に精通しているわけではなく、また日本語のみに対して多くの開発コストをかけることもできない。デジタルデバイスにおける組版規則は、その各々の規則の必要性を非日本語話者に対して合理的に説明できる必要がある。これに対し、印刷組版規則は組版の専門家集団の間で継承されるものであったため、複雑な規則を多くの説明なしに継承してゆくことが可能であった。合意の形成や開発に必要な時間とコストを考えると、組版機能は自ずからよりシンプルなものになろう。

このように見て行くとデジタルデバイスの組版にはアーキテクチャの違いから来る制約が存在することがわかるが、そのコインの裏には大きな可能性がある。それはデジタルネイティブな組版について考えるモティベーションとなる。

#### アクセシビリティ、ユニバーサルデザイン
印刷における一つの大きな制約は印刷のコストの大きさである。前に述べたようにデジタルデバイスにおいてはこれが劇的に安価かつ高速なため、受け手側で組版を行うことができる。冒頭で述べた、誰が組版を決定するのか、という点である。デジタルデバイスでは受け手が組版を決定するため、受け手の必要に応じて表示を最適化することができる。これはアクセシビリティを考慮する際に特に有利な特徴である。

文字の大きさを自在に変えることができる機能は視力に衰えのある場合などに便利であるのはよく知られている。また例えばディスクレシア、読字障害はより複雑な障害だ。その内容は多様で、文字を目で追い、文字のまとまりを単語として認識し、読みに変換するという文を読む過程のどこに障害があるかによって、それを支援するために必要な表示方法に違いがあると言われている。デジタルデバイスなら、個々の障害の種類や程度に合わせて多様で最適な組版と表示を生成することができる。

（小林潤平:読み効率を高める日本語電子リーダー設計の試み、情報の科学と技術、Vol.66, No.10, pp. 525–530 (2016) ）

同様に、ルビの表示の程度を変える、総ルビにするなどの表示の最適化を行うことが可能なら、子供や外国人などの日本語学習者に最適な表示を動的に生成することができる。

きめ細やかな表示の最適化が可能になることにより、アクセシビリティの枠を超え、万人にとってのユニバーサルデザインを追求することができるであろう。

## 3. 対象読者

デジタルデバイスにおいてはテキストを作成する環境にも従来との違いがある。書き手の役割が増えたことである。印刷のモデルでは、書き手はもっぱら素のテキストを提供することが役目であり、書き手が組版の知識をもつ必要はなかった。しかしデジタルデバイスにおいては、各々の書き手は組版の担い手の一人となる。特に書き手が文字を特定する。正しい文字が使われていることは正しく組版を行うのに必要。よって、この文書はシステムへの要件としでだけではなく、書き手も読者対象とした。

（デジタルデバイスでは入力しながら組版をしている。）

- 一般の日本語の書き手。日本語使用者、ローカリゼーションエンジニア。
- テキストシステムの設計者。

## 4. 執筆方針

`未整理でまだ箇条書き。`

#### スコープ外
- 印刷で出版されている書籍をその組版のルールを保ったまま電子化するような用途はスコープ外とする。同様にページの存在に頼る機能はスコープ外。
- 国際化システムの中の日本語として記述。日本語独特ではない部分の組版には踏み込まない。例えば欧文、数式、添字、単位記号など。界面の振る舞いのみを定義する。

#### 技術の取り扱い
- JLReq においては組版の現在の姿を表すために実装とは独立の記述方法をとっている。実装と独立の記述が可能なのは技術が成熟しきっている証左である。技術の進歩が大きい場合、技術につれて可能なことが変化するので、技術独立の記述が不可能になる。デジタルネイティブな組版においては技術との整合性が重要なポイントの一つであるため、実装を考慮した記述となる。エンジニアが読んで実装に移れるような記述にすることが重要である。
- 広く受け入れられている規格や実装との整合性をつける。特に文字の定義は Unicode に基づいたものにする。例えば UAX #44 Unicode Character Database 特に General Category、UAX #11 East Asian Width、UAX #50 Unicode Vertical Text Layout など。
- 必要な組版機能に対して規格・実装に不足があれば、その不足を洗い出して指摘する。この部分は規格や実装の進みに合わせて頻繁なアップデートが必要であろう。例えば日本語組版に対する文字コードの不備は明確に指摘する。同様に、重要であるのにcssやメジャーな実装で欠けていることがあれば、意識して書く。

#### 実装支援
- 実装支援：シンプル化、プライオリティ付け、デフォルトの方法の提案などにより規格化コスト・実装コストを下げる。それにより、より早期に、より多くの、またよりベンダ間で統一の取れた実装が得られることを期待する。同時により洗練された方法も紹介する。
- 複数の組版方法のある場合、可能な限りデフォルトの選択を示し、または選択のための基準を示す。例えば行長に対する最適な行間や禁則の選び方など。

#### 国際化環境の中の日本語
- 国際化環境の中の日本語として記述：従来のJLReqは日本語に閉じた環境を扱っている。その意味でJLReqはJIS文字規格に似ている。JLreq-dではUnicodeのように国際化ソフトウェア環境の中の一つの言語としての日本語を扱う。
- 既存の実装で既に同等な目的の機能が達成されている場合、日本語組版に独特な表現を保存する実質的な利点があるかを考える。
- 特に推奨値が英語や現在の一般的な値と異なる場合にはそれが明確にわかるように書く。例：行間
- 日本語や日本語組版に必ずしも精通していない技術者の理解のため、基本から書く：フォントなど、JIS X 4051 や JLReq が詳しく扱っていないが、国際化環境の中に日本語組版を成り立たせるために必要な技術をカバーする。

#### 位置付け、書き方
- 規範というよりガイドライン。「推奨」と「要件」は明確に分けて、わかるように書く
- 理由を説明する。背景を示す：組版機能に対し、なぜそのような方法になっているのか、その理由を示すことでより良い理解を助ける。組版の方法や値が複数ある場合や、明確な答えがない場合には、その機能を考える際に重要な要素を示すことで独自の判断を助ける。結果のみではなく理由を示すことで、そこで示されている方法と異なった方法を試みることを可能にし、また議論と将来の進化を促すような内容にする。背景理解に役に立つ場合歴史的な経緯を示す。ただし歴史そのものが目的ではないので注意。
